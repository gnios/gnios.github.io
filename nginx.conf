events {
    worker_connections 1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    server {
        listen 80;
        server_name localhost;

        # P√°gina principal com informa√ß√µes sobre os logs
        location / {
            return 200 '<!DOCTYPE html>
<html>
<head>
    <title>MCP Browser Tools - Logs</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .header { background: #f4f4f4; padding: 20px; border-radius: 5px; }
        .log-entry { background: #fff; border: 1px solid #ddd; margin: 10px 0; padding: 15px; border-radius: 5px; }
        .error { border-left: 4px solid #e74c3c; }
        .warning { border-left: 4px solid #f39c12; }
        .info { border-left: 4px solid #3498db; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 3px; overflow-x: auto; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîç MCP Browser Tools - Monitor de Erros</h1>
        <p>Visualize os erros capturados do browser em tempo real</p>
        <p><strong>Endpoint:</strong> POST http://localhost:3001/errors</p>
    </div>
    
    <div id="logs">
        <h2>üìä Logs de Erros</h2>
        <p>Os logs aparecer√£o aqui quando erros forem capturados...</p>
    </div>

    <script>
        // Auto-refresh para mostrar logs em tempo real
        setInterval(() => {
            fetch("/logs/")
                .then(response => response.text())
                .then(data => {
                    document.getElementById("logs").innerHTML = data;
                })
                .catch(err => console.log("Erro ao carregar logs:", err));
        }, 2000);
    </script>
</body>
</html>';
            add_header Content-Type text/html;
        }

        # Servir arquivos de log
        location /logs/ {
            alias /usr/share/nginx/html/logs/;
            autoindex on;
            autoindex_format json;
        }
    }
}
